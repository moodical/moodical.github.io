(this.webpackJsonpmoodical=this.webpackJsonpmoodical||[]).push([[0],{134:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(15),r=c.n(s),i=(c(83),c(13)),o=c.n(i),l=c(20),u=c(4),d=c(78),j=(c(85),c(73)),m=c.n(j),b=c(12),h=c.n(b),x=(c.p,c(16)),f=c(6),p=c(2);var O=function(e){var t=e.user,c=Object(n.useState)(t.is_following),a=Object(u.a)(c,2),s=a[0],r=a[1];function i(){return(i=Object(l.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==s){e.next=6;break}return e.next=3,h.a.post("".concat(y,"/api/follow-user/"),{id:t,token:localStorage.getItem("token")});case 3:c=e.sent,r(!0),console.log(c.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"card m-2 bg-dark text-light",style:{width:"12rem",height:350},children:[Object(p.jsx)("img",{src:t.image,className:"card-img-top",alt:"user"}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{className:"card-title",children:t.name}),Object(p.jsx)("p",{className:"card-text",children:t.mood?t.mood:"neutral"}),Object(p.jsx)("button",{className:s?"btn btn-success":"btn btn-primary",onClick:function(){return function(e){return i.apply(this,arguments)}(t.id)},children:s?"Following":"Follow"})]})]},t.id)};var v=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),r=Object(u.a)(s,2),i=r[0],o=r[1],l=Object(n.useState)(""),d=Object(u.a)(l,2),j=d[0],m=d[1],b=Object(f.e)();return Object(n.useEffect)((function(){localStorage.getItem("token")&&(window.location.pathname="/")}),[]),Object(p.jsx)("div",{className:"w-75 d-flex justify-content-center align-items-center",children:Object(p.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),h.a.post("".concat(y,"/api/signup/"),{username:c,password:i,email:j}).then((function(e){b.push("/login/")})).catch((function(e){console.log(e)}))}(e)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{for:"exampleInputEmail1",children:"Email"}),Object(p.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail2","aria-describedby":"emailHelp",placeholder:"Enter email",value:j,onChange:function(e){return m(e.currentTarget.value)}})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{for:"exampleInputEmail1",children:"Username"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter username",value:c,onChange:function(e){return a(e.currentTarget.value)}}),Object(p.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your details with anyone else."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{for:"exampleInputPassword1",children:"Password"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",value:i,onChange:function(e){return o(e.currentTarget.value)}})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("small",{id:"emailHelp",className:"form-text text-muted text-center mt-4",children:["Already a user? ",Object(p.jsx)(x.b,{to:"/login",children:"Login"})]})})]})})};var g=function(e){var t=Object(n.useState)(""),c=Object(u.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(u.a)(r,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){localStorage.getItem("token")&&(window.location.pathname="/")}),[]),Object(p.jsx)("div",{className:"w-75 d-flex justify-content-center align-items-center",children:Object(p.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),h.a.post("".concat(y,"/api/login/"),{username:a,password:o}).then((function(e){var t=e.data.token,c=e.data.username,n=e.data.pk;localStorage.setItem("token",t),localStorage.setItem("username",c),localStorage.setItem("pk",n),window.location.pathname="/"})).catch((function(e){console.log(e)}))}(e)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{for:"exampleInputEmail1",children:"Username"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter username",value:a,onChange:function(e){return s(e.currentTarget.value)},required:!0}),Object(p.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your details with anyone else."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{for:"exampleInputPassword1",children:"Password"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",value:o,onChange:function(e){return l(e.currentTarget.value)},required:!0})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("small",{id:"emailHelp",className:"form-text text-muted text-center mt-4",children:["Not a user? ",Object(p.jsx)(x.b,{to:"/signup",children:"Register"})]})})]})})};var w=function(e){var t=e.mood,c=e.webCamera,a=e.audioList,s=e.apiAudioListCopy,r=e.prev,i=e.next,o=e.playMusic,l=e.Webcam,d=e.fetchMusic,j=Object(n.useState)(""),m=Object(u.a)(j,2),b=m[0],h=m[1];return Object(n.useEffect)((function(){localStorage.getItem("token")?h(localStorage.getItem("username")):window.location.pathname="/login"}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"p-5 w-85",children:[Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"search",placeholder:"Search Music"})}),Object(p.jsxs)("h2",{className:"mt-5 mb-3",children:["Hi ",Object(p.jsx)("span",{className:"text-primary",id:"username",children:b}),", listen to ",t," songs"]}),Object(p.jsxs)("div",{className:"d-flex mt-3 w-100 justify-content-between align-items-center",children:[Object(p.jsx)("div",{className:"circle",onClick:function(){return r()},children:Object(p.jsx)("i",{className:"fas fa-arrow-left"})}),a.map((function(e){return Object(p.jsxs)("div",{className:"nav-btn",onClick:function(){return o(e)},children:[Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:e.cover,className:"mw-100",alt:"song-cover"})}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{children:e.name.slice(0,15)})})]},e.id)})),Object(p.jsx)("div",{className:"circle",onClick:function(){return i()},children:Object(p.jsx)("i",{className:"fas fa-arrow-right"})})]}),Object(p.jsx)("h2",{className:"mt-5",children:"Songs based on your mood"}),Object(p.jsxs)("div",{className:"d-flex justify-content-between mt-3 w-100",children:[Object(p.jsx)("div",{className:"list",children:s.map((function(e){return Object(p.jsx)("div",{className:"listing text-center py-2 font-weight-bold",onClick:function(){return o(e)},children:e.name.slice(0,35)},e.id)}))}),Object(p.jsxs)("div",{id:"cam-div",children:[Object(p.jsx)(l,{className:"webcam",ref:c,mirrored:!0}),Object(p.jsx)("button",{onClick:function(){return d()},children:"Moodify"})]}),Object(p.jsxs)("div",{id:"mood-div",className:"d-flex justify-content-center align-items-center flex-column",children:[Object(p.jsx)("p",{className:"mb-3",children:"You seem to be"}),Object(p.jsx)("p",{className:"font-weight-bold m-0",children:t})]})]})]})})};var N=function(e){var t=e.UserCard;return e.getAllUsers,function(e){var c=Object(n.useState)([]),a=Object(u.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)([]),d=Object(u.a)(i,2),j=d[0],m=d[1];function b(){return(b=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(y,"/api/view-users/"),{token:localStorage.getItem("token")});case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){localStorage.getItem("token")?(!function(){b.apply(this,arguments)}(),h.a.post("".concat(y,"/api/view-followers/"),{token:localStorage.getItem("token")}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))):window.location.pathname="/login"}),[]);var x=Object(n.useRef)();function f(){x.current.classList.remove("d-none")}function O(){x.current.classList.add("d-none")}return Object(p.jsxs)("div",{className:"d-flex flex-column p-5",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Moodifiers"})}),Object(p.jsx)("div",{className:"d-flex flex-wrap",style:{overflowY:"scroll"},children:j.map((function(e){return Object(p.jsx)(t,{user:e})}))}),Object(p.jsxs)("div",{className:"mt-auto",children:[Object(p.jsx)("div",{ref:x,className:"d-none bg-light",onMouseOver:function(){return f()},onMouseLeave:function(){return O()},children:s.map((function(e){return Object(p.jsx)("p",{className:"text-dark text-center m-0",children:e.name})}))}),Object(p.jsx)("button",{onMouseOver:function(){return f()},onMouseLeave:function(){return O()},children:"View my followers"})]})]})}()},y="https://moodicalapi.azurewebsites.net";var S=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),r=Object(u.a)(s,2),i=r[0],j=r[1],b=Object(n.useState)([]),S=Object(u.a)(b,2),k=S[0],I=S[1],C=Object(n.useState)(""),E=Object(u.a)(C,2),M=E[0],L=E[1],H=Object(n.useState)(null),P=Object(u.a)(H,2),T=P[0],R=P[1],A=Object(n.useState)([]),U=Object(u.a)(A,2),D=U[0],F=U[1],W=Object(n.useRef)(null);function q(){return(q=Object(l.a)(o.a.mark((function e(){var t,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(y,"/api/post-image/"),{image:W.current.getScreenshot(),token:localStorage.getItem("token")});case 2:t=e.sent,c=t.data.songs,n=t.data.mood,j([]),I([]),I(c.map((function(e){return{name:e.name,musicSrc:e.musicSrc,cover:e.cover}}))),j(c),L(n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0;t<c;){var n=e[t];e[t]=e[c],e[c]=n,t++,c--}}return Object(n.useEffect)((function(){a(i.slice(0,6))}),[i,k]),Object(p.jsxs)("div",{children:[Object(p.jsx)(x.a,{children:Object(p.jsxs)("div",{className:"d-flex h-90",children:[Object(p.jsxs)("div",{className:"w-15 text-center pt-5",id:"menu",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Moodical"})}),Object(p.jsxs)("nav",{className:"d-flex flex-column justify-content-around",children:[Object(p.jsx)(x.c,{to:"/",activeClassName:"active",exact:!0,children:Object(p.jsx)("div",{children:Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:Object(p.jsx)("i",{className:"fas fa-home"})})," ","Home"]})})}),Object(p.jsx)(x.c,{to:"/friends/",activeClassName:"active",exact:!0,children:Object(p.jsx)("div",{children:Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:Object(p.jsx)("i",{className:"fas fa-user-friends"})})," ","Friends"]})})}),Object(p.jsx)("div",{onClick:function(){return localStorage.clear(),void(window.location.pathname="/login")},children:Object(p.jsx)("div",{children:localStorage.getItem("token")&&"Logout"})})]}),Object(p.jsx)("div",{id:"info",children:"Rachit Kumar | Riddhiman Sengupta | Harsh Gupta"})]}),Object(p.jsx)(f.a,{path:"/",exact:!0,children:Object(p.jsx)(w,{mood:M,webCamera:W,audioList:c,apiAudioListCopy:k,prev:function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];J(e,0,e.length-2),J(e,0,e.length-1)}(i);var e=[];i.slice(0,6).map((function(t){return e.push(t),""})),a(e)},next:function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];J(e,1,e.length-1),J(e,0,e.length-1)}(i);var e=[];i.slice(0,6).map((function(t){return e.push(t),""})),a(e)},playMusic:function(e){T.clear(),setTimeout((function(){F([e]),T.play()}),300)},Webcam:m.a,fetchMusic:function(){return q.apply(this,arguments)}})}),Object(p.jsx)(f.a,{path:"/friends",exact:!0,children:Object(p.jsx)(N,{UserCard:O})}),Object(p.jsx)(f.a,{path:"/signup",exact:!0,children:Object(p.jsx)(v,{})}),Object(p.jsx)(f.a,{path:"/login",exact:!0,children:Object(p.jsx)(g,{})})]})}),Object(p.jsx)("div",{children:Object(p.jsx)(d.a,{mode:"full",showDownload:!1,showDestroy:!1,showReload:!1,showLyric:!1,showThemeSwitch:!1,showPlayMode:!1,toggleMode:!1,audioLists:D,autoPlay:!1,seeked:!1,getAudioInstance:function(e){R(e)}})})]})};r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(S,{})}),document.getElementById("root"))},83:function(e,t,c){}},[[134,1,2]]]);
//# sourceMappingURL=main.2ab68bcd.chunk.js.map